<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Heart Disease Predictor</title>
  <link rel="stylesheet" href="css/styles.css" />
</head>
<body>
  <div class="container">
    <h1>Heart Disease Prediction</h1>
    <form id="predictionForm">
  <label for="age">Age (18-110):</label>
  <input type="number" id="age" min="18" max="110" placeholder="18-110" required />

  <label for="sex">Sex (0=Female, 1=Male):</label>
  <input type="number" id="sex" min="0" max="1" placeholder="0 or 1" required />

  <label for="cp">CP (0-3):</label>
  <input type="number" id="cp" min="0" max="3" placeholder="0-3" required />

  <label for="trestbps">Trestbps (50-250):</label>
  <input type="number" id="trestbps" min="50" max="250" placeholder="50-250" required />

  <label for="chol">Chol (100-600):</label>
  <input type="number" id="chol" min="100" max="600" placeholder="100-600" required />

  <label for="fbs">FBS (0-1):</label>
  <input type="number" id="fbs" min="0" max="1" placeholder="0 or 1" required />

  <label for="restecg">Restecg (0-2):</label>
  <input type="number" id="restecg" min="0" max="2" placeholder="0-2" required />

  <label for="thalach">Thalach (60-220):</label>
  <input type="number" id="thalach" min="60" max="220" placeholder="60-220" required />

  <label for="exang">Exang (0-1):</label>
  <input type="number" id="exang" min="0" max="1" placeholder="0 or 1" required />

  <label for="oldpeak">Oldpeak (0.0-10.0):</label>
  <input type="number" step="0.1" id="oldpeak" min="0" max="10" placeholder="0.0-10.0" required />

  <label for="slope">Slope (0-2):</label>
  <input type="number" id="slope" min="0" max="2" placeholder="0-2" required />

  <label for="ca">CA (0-3):</label>
  <input type="number" id="ca" min="0" max="3" placeholder="0-3" required />

  <label for="thal">Thal (1-3):</label>
  <input type="number" id="thal" min="1" max="3" placeholder="1-3" required />

  <button type="submit">Predict</button>
</form>

    <h2>Result:</h2>
    <pre id="result"></pre>
  </div>

<script>
const form = document.getElementById('predictionForm');
const resultBox = document.getElementById('result');

// Use relative URL so it works both locally and on Render
const API_URL = "/predict";

form.addEventListener('submit', async (e) => {
  e.preventDefault();

  const data = {
    age: Number(document.getElementById('age').value),
    sex: Number(document.getElementById('sex').value),
    cp: Number(document.getElementById('cp').value),
    trestbps: Number(document.getElementById('trestbps').value),
    chol: Number(document.getElementById('chol').value),
    fbs: Number(document.getElementById('fbs').value),
    restecg: Number(document.getElementById('restecg').value),
    thalach: Number(document.getElementById('thalach').value),
    exang: Number(document.getElementById('exang').value),
    oldpeak: Number(document.getElementById('oldpeak').value),
    slope: Number(document.getElementById('slope').value),
    ca: Number(document.getElementById('ca').value),
    thal: Number(document.getElementById('thal').value),
  };

  try {
    const response = await fetch(API_URL, {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(data),
    });

    if (!response.ok) throw new Error('Network response was not ok');

    const json = await response.json();
    resultBox.textContent = JSON.stringify(json, null, 2);
  } catch (error) {
    resultBox.textContent = `Error: ${error.message}`;
  }
});
</script>

</body>
</html>
